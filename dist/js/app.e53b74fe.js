(function(e){function a(a){for(var i,c,o=a[0],d=a[1],s=a[2],l=0,u=[];l<o.length;l++)c=o[l],n[c]&&u.push(n[c][0]),n[c]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i]);m&&m(a);while(u.length)u.shift()();return r.push.apply(r,s||[]),t()}function t(){for(var e,a=0;a<r.length;a++){for(var t=r[a],i=!0,o=1;o<t.length;o++){var d=t[o];0!==n[d]&&(i=!1)}i&&(r.splice(a--,1),e=c(c.s=t[0]))}return e}var i={},n={app:0},r=[];function c(a){if(i[a])return i[a].exports;var t=i[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=e,c.c=i,c.d=function(e,a,t){c.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,a){if(1&a&&(e=c(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var i in e)c.d(t,i,function(a){return e[a]}.bind(null,i));return t},c.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(a,"a",a),a},c.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},c.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=a,o=o.slice();for(var s=0;s<o.length;s++)a(o[s]);var m=d;r.push([0,"chunk-vendors"]),t()})({0:function(e,a,t){e.exports=t("56d7")},"56d7":function(e,a,t){"use strict";t.r(a);t("cadf"),t("551c"),t("f751"),t("097d");var i=t("2b0e"),n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"app"}},[t("CameraSelection",{on:{"change-camera":e.onChangeCamera}}),t("CameraCanvas",{ref:"cameraCanvas",attrs:{cameraType:e.cameraType,cameraSize:e.cameraSize}})],1)},r=[],c=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("fieldset",[t("legend",[e._v("カメラ")]),t("div",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cameraType,expression:"cameraType"}],attrs:{type:"radio",name:"cameraType",value:"facingMode"},domProps:{checked:e._q(e.cameraType,"facingMode")},on:{change:function(a){e.cameraType="facingMode"}}}),e._v("\n      facingMode\n    ")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.facingMode,expression:"facingMode"}],on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){var a="_value"in e?e._value:e.value;return a});e.facingMode=a.target.multiple?t:t[0]}}},[t("option",[e._v("user")]),t("option",[e._v("environment")])])]),t("div",[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cameraType,expression:"cameraType"}],attrs:{type:"radio",name:"cameraType",value:"deviceId"},domProps:{checked:e._q(e.cameraType,"deviceId")},on:{change:function(a){e.cameraType="deviceId"}}}),e._v("\n      deviceId\n    ")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.deviceId,expression:"deviceId"}],on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){var a="_value"in e?e._value:e.value;return a});e.deviceId=a.target.multiple?t:t[0]}}},e._l(e.mediaDeviceInfoList,function(a){return t("option",{key:a.deviceId,domProps:{value:a.deviceId}},[e._v(e._s(a.label))])}),0)]),t("div",[e._v("\n    Size:\n    "),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cameraSize,expression:"cameraSize"}],attrs:{type:"radio",name:"cameraSize",value:"AUTO"},domProps:{checked:e._q(e.cameraSize,"AUTO")},on:{change:function(a){e.cameraSize="AUTO"}}}),e._v("AUTO\n    ")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cameraSize,expression:"cameraSize"}],attrs:{type:"radio",name:"cameraSize",value:"QVGA"},domProps:{checked:e._q(e.cameraSize,"QVGA")},on:{change:function(a){e.cameraSize="QVGA"}}}),e._v("QVGA\n    ")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cameraSize,expression:"cameraSize"}],attrs:{type:"radio",name:"cameraSize",value:"VGA"},domProps:{checked:e._q(e.cameraSize,"VGA")},on:{change:function(a){e.cameraSize="VGA"}}}),e._v("VGA\n    ")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cameraSize,expression:"cameraSize"}],attrs:{type:"radio",name:"cameraSize",value:"HD"},domProps:{checked:e._q(e.cameraSize,"HD")},on:{change:function(a){e.cameraSize="HD"}}}),e._v("HD\n    ")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cameraSize,expression:"cameraSize"}],attrs:{type:"radio",name:"cameraSize",value:"Full HD"},domProps:{checked:e._q(e.cameraSize,"Full HD")},on:{change:function(a){e.cameraSize="Full HD"}}}),e._v("Full HD\n    ")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cameraSize,expression:"cameraSize"}],attrs:{type:"radio",name:"cameraSize",value:"4K"},domProps:{checked:e._q(e.cameraSize,"4K")},on:{change:function(a){e.cameraSize="4K"}}}),e._v("4K\n    ")])]),t("div",[t("button",{on:{click:e.onClickSettingButton}},[e._v("設定")])])])},o=[],d={name:"CameraSelection",data:function(){return{cameraType:"facingMode",facingMode:"environment",mediaDeviceInfoList:[],deviceId:null,cameraSize:"AUTO"}},mounted:function(){var e=this;navigator.mediaDevices.enumerateDevices().then(function(a){e.mediaDeviceInfoList=a.filter(function(e){return"videoinput"==e.kind}),e.mediaDeviceInfoList.length>0&&(e.deviceId=e.mediaDeviceInfoList[0].deviceId)})},methods:{onClickSettingButton:function(){var e={};switch(this.cameraType){case"facingMode":e.type="facingMode",e.device=this.facingMode;break;case"deviceId":e.type="deviceId",e.device=this.deviceId;break}var a=null;switch(this.cameraSize){case"AUTO":break;case"QVGA":a={width:320,height:240};break;case"VGA":a={width:640,height:480};break;case"HD":a={width:1280,height:720};break;case"Full HD":a={width:1920,height:1080};break;case"4K":a={width:4096,height:2160};break}this.$emit("change-camera",e,a)}}},s=d,m=t("2877"),l=Object(m["a"])(s,c,o,!1,null,null,null),u=l.exports,v=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("canvas")},p=[],h=(t("ac6a"),t("d093"),{name:"CameraCanvas",props:{cameraType:Object,cameraSize:Object},mounted:function(){this.video=document.createElement("video"),this.canvas=this.$el,this.ctx=this.canvas.getContext("2d"),this.updateCamera()},methods:{_getConstraints:function(){var e={};return this.cameraType&&(e[this.cameraType.type]=this.cameraType.device),this.cameraSize&&(e.width={exact:this.cameraSize.width},e.height={exact:this.cameraSize.height}),e},updateCamera:function(){var e=this;this.stream&&this.stream.getTracks().forEach(function(e){e.stop()}),navigator.mediaDevices.getUserMedia({video:this._getConstraints()}).then(function(a){e.stream=a,e.video.srcObject=a,e.video.setAttribute("playsinline",!0),e.video.play(),requestAnimationFrame(e._tick)}).catch(function(e){console.error(e),alert(e)})},_tick:function(){this.video.readyState===this.video.HAVE_ENOUGH_DATA&&(this.canvas.height=this.video.videoHeight,this.canvas.width=this.video.videoWidth,this.ctx.drawImage(this.video,0,0,this.canvas.width,this.canvas.height)),requestAnimationFrame(this._tick)}}}),f=h,g=Object(m["a"])(f,v,p,!1,null,null,null),y=g.exports,S={name:"app",components:{CameraSelection:u,CameraCanvas:y},data:function(){return{cameraType:{type:"facingMode",device:"environment"},cameraSize:null}},methods:{onChangeCamera:function(e,a){var t=this;this.cameraType=e,this.cameraSize=a,this.$nextTick(function(){return t.$refs.cameraCanvas.updateCamera()})}}},_=S,b=Object(m["a"])(_,n,r,!1,null,null,null),z=b.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(z)}}).$mount("#app")}});
//# sourceMappingURL=app.e53b74fe.js.map